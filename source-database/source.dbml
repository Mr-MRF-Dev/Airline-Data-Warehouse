
Table "Aircraft" {
  "Aircraft_ID" INT [pk]
  "Registration_Number" VARCHAR(20)
  "Model" VARCHAR(50)
  "Capacity" INT
  "Manufacturer" VARCHAR(50)
  "Engine_Type" VARCHAR(50)
  "Status" VARCHAR(30)
  "Manufacture_Date" DATE
  "Max_Range_KM" INT
  "Fuel_Capacity_Liters" DECIMAL(10,2)
  "Wingspan_Meters" DECIMAL(6,2)
}

Table "Airport" {
  "Airport_Code" VARCHAR(10) [pk]
  "Airport_Name" VARCHAR(100)
  "City" VARCHAR(50)
  "Country" VARCHAR(50)
  "IATA_Code" CHAR(3)
  "ICAO_Code" CHAR(4)
  "Latitude" DECIMAL(10,6)
  "Longitude" DECIMAL(10,6)
  "Elevation_Feet" INT
  "Timezone" VARCHAR(50)
  "DST" CHAR(1)
  "Is_International" BIT
  "Opening_Date" DATE
  "Terminal_Count" INT
}

Table "Route" {
  "Route_ID" INT [pk]
  "Origin_Airport_Code" VARCHAR(10)
  "Destination_Airport_Code" VARCHAR(10)
  "Distance_KM" INT
  "Domestic_International" VARCHAR(20)
}

Table "Customer" {
  "Customer_ID" INT [pk]
  "First_Name" VARCHAR(50)
  "Last_Name" VARCHAR(50)
  "Email" VARCHAR(100) [unique]
  "Phone_Number" VARCHAR(20)
  "Gender" CHAR(1)
  "Birth_Date" DATE
  "Country" VARCHAR(50)
  "City" VARCHAR(50)
  "Address" VARCHAR(200)
  "Postal_Code" VARCHAR(20)
  "Loyalty_Tier" VARCHAR(50)
  "Loyalty_Points" INT [default: 0]
  "SignUp_Date" DATE
  "Loyalty_Change_Date" DATE
  "Last_Login_Date" DATETIME
  "Preferred_Language" VARCHAR(30)
  "Is_Active" BIT [default: 1]
  "Created_At" DATETIME2 [default: `SYSDATETIME()`]
  "Updated_At" DATETIME2 [default: `SYSDATETIME()`]
}

Table "Class" {
  "Class_ID" INT [pk]
  "Class_Name" VARCHAR(50)
  "Services" NVARCHAR(1000)
  "Price_Multiplier" DECIMAL(4,2)
  "Baggage_Allowance_KG" DECIMAL(5,2)
  "Seat_Pitch_CM" INT
  "Priority_Boarding" BIT [default: 0]
  "Lounge_Access" BIT [default: 0]
  "Meal_Service_Level" VARCHAR(50)
  "Is_Active" BIT [default: 1]
}

Table "Payment_Method" {
  "Payment_Method_ID" INT [pk]
  "Method_Name" VARCHAR(50)
  "Provider_Name" VARCHAR(50)
  "Processing_Fee" DECIMAL(5,2)
  "Currency" VARCHAR(3)
  "Is_Active" BIT [default: 1]
  "Added_Date" DATETIME [default: `GETDATE()`]
  "Security_Level" VARCHAR(20)
  "Description" NVARCHAR(200)
}

Table "Cargo_Type" {
  "Cargo_Type_ID" INT [pk]
  "Type_Name" VARCHAR(100)
  "Description" NVARCHAR(1000)
  "Is_Hazardous" BIT
}

Table "Employee" {
  "Employee_ID" INT [pk]
  "First_Name" VARCHAR(50)
  "Last_Name" VARCHAR(50)
  "Email" VARCHAR(100)
  "Phone_Number" VARCHAR(20)
  "Birth_Date" DATE
  "Hire_Date" DATE
  "Exit_Date" DATE
  "Is_Active" BIT [default: 1]
  "Emergency_Contact" VARCHAR(100)
}

Table "Crew" {
  "Crew_ID" INT [pk]
  "Employee_ID" INT
  "Role" VARCHAR(50)
  "Rank" VARCHAR(50)
  "Certification_Level" VARCHAR(50)
  "Nationality" VARCHAR(50)
  "License_Number" VARCHAR(30)
  "License_Expiry_Date" DATE
  "Training_Hours" INT
}

Table "Technician" {
  "Technician_ID" INT [pk]
  "Employee_ID" INT
  "Specialty" VARCHAR(100)
  "Certification_Level" VARCHAR(50)
  "License_Number" VARCHAR(30)
  "License_Expiry_Date" DATE
  "Training_Hours" INT
  "Years_Experience" INT
  "Supervisor_ID" INT
}

Table "Maintenance_Type" {
  "Maintenance_Type_ID" INT [pk]
  "Type_Name" VARCHAR(100)
  "Description" NVARCHAR(1000)
  "Tools_Required" NVARCHAR(1000)
  "Estimated_Duration_Hours" INT
  "Frequency_Days" INT
  "Is_Mandatory" BIT [default: 1]
  "FAA_Required" BIT
}

Table "Flight" {
  "Flight_ID" INT [pk]
  "Flight_Number" VARCHAR(10)
  "Aircraft_ID" INT
  "Route_ID" INT
  "Flight_Date" DATE
  "Scheduled_Departure" TIME
  "Scheduled_Arrival" TIME
  "Actual_Departure" TIME
  "Actual_Arrival" TIME
  "Departure_Delay_Minutes" INT
  "Arrival_Delay_Minutes" INT
  "Passenger_Count" INT
  "Revenue" DECIMAL(10,2)
  "Flight_Status" VARCHAR(50)
  "Cancelled" BIT
  "Cancellation_Reason_Code" VARCHAR(20)
  "Cancellation_Date" DATE

  Indexes {
    Flight_Number [unique, name: "idx_Flight_FlightNumber"]
    Route_ID [name: "idx_Flight_RouteID"]
  }
}

Table "Ticket" {
  "Ticket_ID" INT [pk]
  "Customer_ID" INT
  "Flight_ID" INT
  "Class_ID" INT
  "Payment_Method_ID" INT
  "Price" DECIMAL(10,2)
  "Discount" DECIMAL(10,2)
  "Final_Amount" DECIMAL(10,2)
  "Is_Refunded" BIT
  "Sale_Date" DATE
  "Created_At" DATETIME2 [default: `SYSDATETIME()`]
  "Updated_At" DATETIME2 [default: `SYSDATETIME()`]
}

Table "Maintenance" {
  "Maintenance_ID" INT [pk]
  "Aircraft_ID" INT
  "Maintenance_Type_ID" INT
  "Technician_ID" INT
  "Maintenance_Start_Date" DATE
  "Maintenance_End_Date" DATE
  "Duration_Hours" INT
  "Cost" DECIMAL(10,2)
  "Issue_Description" NVARCHAR(2000)
}

Table "Feedback" {
  "Customer_ID" INT
  "Flight_ID" INT
  "Feedback_Date" DATE
  "Rating" INT
  "Comment_Text" NVARCHAR(2000)

  Indexes {
    (Customer_ID, Flight_ID, Feedback_Date) [pk]
  }
}

Table "Cargo" {
  "Cargo_ID" INT [pk]
  "Customer_ID" INT
  "Flight_ID" INT
  "Cargo_Type_ID" INT
  "Weight_KG" DECIMAL(10,2)
  "Volume_CM3" DECIMAL(10,2)
  "Declared_Value" DECIMAL(10,2)
  "Is_Lost" BIT
  "Is_Damaged" BIT
  "Cargo_Date" DATE
}

Table "Flight_Crew" {
  "Flight_ID" INT
  "Crew_ID" INT
  "Assignment_Date" DATE
  "Role" VARCHAR(50)

  Indexes {
    (Flight_ID, Crew_ID) [pk]
  }
}

Ref:"Airport"."Airport_Code" < "Route"."Origin_Airport_Code"

Ref:"Airport"."Airport_Code" < "Route"."Destination_Airport_Code"

Ref:"Employee"."Employee_ID" < "Crew"."Employee_ID"

Ref:"Employee"."Employee_ID" < "Technician"."Employee_ID"

Ref:"Technician"."Technician_ID" < "Technician"."Supervisor_ID"

Ref:"Aircraft"."Aircraft_ID" < "Flight"."Aircraft_ID"

Ref:"Route"."Route_ID" < "Flight"."Route_ID"

Ref:"Customer"."Customer_ID" < "Ticket"."Customer_ID"

Ref:"Flight"."Flight_ID" < "Ticket"."Flight_ID"

Ref:"Class"."Class_ID" < "Ticket"."Class_ID"

Ref:"Payment_Method"."Payment_Method_ID" < "Ticket"."Payment_Method_ID"

Ref:"Aircraft"."Aircraft_ID" < "Maintenance"."Aircraft_ID"

Ref:"Maintenance_Type"."Maintenance_Type_ID" < "Maintenance"."Maintenance_Type_ID"

Ref:"Technician"."Technician_ID" < "Maintenance"."Technician_ID"

Ref:"Customer"."Customer_ID" < "Feedback"."Customer_ID"

Ref:"Flight"."Flight_ID" < "Feedback"."Flight_ID"

Ref:"Customer"."Customer_ID" < "Cargo"."Customer_ID"

Ref:"Flight"."Flight_ID" < "Cargo"."Flight_ID"

Ref:"Cargo_Type"."Cargo_Type_ID" < "Cargo"."Cargo_Type_ID"

Ref:"Flight"."Flight_ID" < "Flight_Crew"."Flight_ID"

Ref:"Crew"."Crew_ID" < "Flight_Crew"."Crew_ID"
